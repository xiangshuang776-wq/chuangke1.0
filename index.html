<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TikTok 創客達人招募</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body style="margin:0; background:#050505; color: white; -webkit-tap-highlight-color: transparent;">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        function App() {
            const [view, setView] = useState("creator"); 
            const [lang, setLang] = useState("zh_tw");
            const [videoCount, setVideoCount] = useState(10);
            
            // --- 核心數據狀態 ---
            const [currentUser, setCurrentUser] = useState(null); // 當前登錄用戶物件
            const [qrCodeUrl, setQrCodeUrl] = useState("https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=MAKERPRO_SERVICE");
            const [pendingUsers, setPendingUsers] = useState([
                { id: 999, info: "example@test.com", tiktok: "https://tiktok.com/@official", status: "pending", time: "2026-02-12" }
            ]);

            // --- 彈窗與表單控制 ---
            const [showModal, setShowModal] = useState(false);
            const [modalType, setModalType] = useState("login"); // login, register, adminLogin, service
            const [inputVal, setInputVal] = useState("");
            const [inputPass, setInputPass] = useState("");
            const [status, setStatus] = useState("idle");

            // 長按 Logo 進入管理員模式
            const timerRef = useRef(null);
            const handleLogoTouchStart = () => {
                timerRef.current = setTimeout(() => { setModalType("adminLogin"); setShowModal(true); }, 2000);
            };
            const handleLogoTouchEnd = () => clearTimeout(timerRef.current);

            const content = {
                zh_tw: {
                    hero: ["TikTok", "創客達人招募"],
                    subtitle: "只要發佈一條視頻就有 20 台幣！獎金疊加。",
                    calcTitle: "預估月收入模擬", normal: "見習收益", pro: "紅創客收益",
                    statusPending: "⏳ 待審核", statusApproved: "✅ 審核已通過", statusRejected: "❌ 駁回：請聯繫客服",
                    withdrawBtn: "餘額提現", submitTask: "提交視頻連結", submitBtn: "提交審核",
                    modals: {
                        login: { title: "創客登錄", btn: "登錄" },
                        register: { title: "新創客註冊", btn: "註冊並前往登錄" },
                        adminLogin: { title: "管理員模式", btn: "進入" }
                    }
                }
            };
            const t = content["zh_tw"];

            // --- 核心邏輯執行 ---
            const handleLogic = (e) => {
                e.preventDefault();
                setStatus("processing");
                setTimeout(() => {
                    if (modalType === "register") {
                        alert("註冊成功！請登錄。");
                        setModalType("login");
                    } else if (modalType === "login") {
                        setCurrentUser({ email: inputVal, balance: 0, status: "pending", tiktok: "未綁定" });
                        setView("userDash");
                        setShowModal(false);
                    } else if (modalType === "adminLogin") {
                        if (inputVal === "admin888") { setView("admin"); setShowModal(false); }
                        else { alert("密碼錯誤"); }
                    }
                    setStatus("idle"); setInputVal(""); setInputPass("");
                }, 1000);
            };

            const styles = {
                container: { backgroundColor: '#050505', color: 'white', minHeight: '100vh', fontFamily: 'Inter, sans-serif' },
                navbar: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '15px 4%', borderBottom: '1px solid #111', background: '#050505', position: 'sticky', top: 0, zIndex: 100 },
                logo: { fontSize: '20px', fontWeight: '900', cursor: 'pointer' },
                card: { background: '#0a0a0a', border: '1px solid #1a1a1a', borderRadius: '20px', padding: '25px', marginBottom: '15px' },
                btnMain: { width: '100%', background: '#fff', color: '#000', border: 'none', padding: '14px', borderRadius: '12px', fontWeight: 'bold', cursor: 'pointer' },
                btnCyan: { background: '#00f2ea', color: '#000', border: 'none', padding: '8px 15px', borderRadius: '8px', fontWeight: 'bold' },
                bottomBar: { position: 'fixed', bottom: 0, left: 0, right: 0, background: 'linear-gradient(to top, #000, transparent)', padding: '15px 5%', zIndex: 200 }
            };

            return (
                <div style={styles.container}>
                    <style>{`
                        @media (max-width: 600px) { .hero-title { font-size: 50px !important; } .nav-logo { font-size: 25px !important; } }
                        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(15px); display: flex; align-items: center; justify-content: center; z-index: 1000; }
                        .modal-content { background: #111; border: 1px solid #222; padding: 25px; border-radius: 24px; width: 300px; text-align:center; }
                        .input-box { width: 100%; background: #000; border: 1px solid #333; padding: 12px; border-radius: 10px; color: #fff; margin-bottom: 10px; box-sizing: border-box; }
                    `}</style>

                    {/* --- 1. 導航欄 --- */}
                    <nav style={styles.navbar}>
                        <div className="nav-logo" style={styles.logo} onMouseDown={handleLogoTouchStart} onTouchStart={handleLogoTouchStart} onMouseUp={handleLogoTouchEnd} onTouchEnd={handleLogoTouchEnd}>
                            MAKER<span style={{color:'#00f2ea'}}>PRO</span>
                        </div>
                        {currentUser ? <div style={{fontSize:'12px', color:'#00f2ea'}}>{currentUser.email}</div> : 
                        <div onClick={()=>{setModalType("login"); setShowModal(true)}} style={{fontSize:'12px', cursor:'pointer'}}>登錄/註冊</div>}
                    </nav>

                    {/* --- 2. 視圖切換 --- */}
                    {view === "creator" ? (
                        <div style={{paddingBottom:'100px'}}>
                            <header style={{textAlign:'center', padding:'60px 20px 30px'}}>
                                <h1 className="hero-title" style={{fontSize:'70px', fontWeight:'900', margin:0}}>{t.hero[0]}<br/><span style={{background:'linear-gradient(90deg, #00f2ea, #fff, #ff0050)', WebkitBackgroundClip:'text', WebkitTextFillColor:'transparent'}}>{t.hero[1]}</span></h1>
                                <p style={{color:'#666', fontSize:'14px', marginTop:'15px'}}>{t.subtitle}</p>
                            </header>
                            <section style={{maxWidth:'1000px', margin:'0 auto', padding:'0 20px'}}>
                                <div style={{display:'flex', gap:'10px', flexWrap:'nowrap'}}>
                                    {[[ "基礎", "20" ], [ "流量", "40" ], [ "爆款", "100+" ]].map((it, i) => (
                                        <div key={i} style={{flex:1, textAlign:'center', background:'rgba(255,255,255,0.03)', border:'1px solid #1a1a1a', borderRadius:'15px', padding:'15px'}}>
                                            <div style={{fontSize:'10px', color:'#00f2ea'}}>STEP 0{i+1}</div>
                                            <div style={{fontSize:'12px', margin:'5px 0'}}>{it[0]}</div>
                                            <div style={{fontSize:'24px', fontWeight:'900'}}>{it[1]}</div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                            <div className={styles.bottomBar} style={styles.bottomBar}>
                                <button style={{width:'100%', maxWidth:'500px', background:'#111', border:'1.5px solid #00f2ea', color:'#00f2ea', padding:'16px', borderRadius:'50px', fontWeight:'900', cursor:'pointer'}} onClick={()=>setView(currentUser?"userDash":"creator")}>
                                    {currentUser ? "進入個人中心" : "立即加入創客計畫"}
                                </button>
                            </div>
                        </div>
                    ) : view === "userDash" ? (
                        /* --- 3. 用戶端頁面 --- */
                        <div style={{padding:'20px 5%'}}>
                            <div style={styles.card}>
                                <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>
                                    <div>
                                        <div style={{fontSize:'12px', color:'#666'}}>當前餘額</div>
                                        <div style={{fontSize:'28px', fontWeight:'900', color:'#00f2ea'}}>{currentUser.balance} <span style={{fontSize:'14px'}}>TWD</span></div>
                                    </div>
                                    <button style={styles.btnCyan} onClick={()=>alert("餘額不足 500 TWD，無法提現")}>{t.withdrawBtn}</button>
                                </div>
                            </div>

                            <div style={styles.card}>
                                <h3 style={{marginTop:0, fontSize:'16px'}}> TikTok 賬號狀態</h3>
                                <div style={{padding:'15px', borderRadius:'12px', background:'#000', border:'1px solid #222', textAlign:'center', margin:'15px 0'}}>
                                    <div style={{fontSize:'18px', fontWeight:'bold', color: currentUser.status==='pending'?'#ffd700':currentUser.status==='approved'?'#00f2ea':'#ff0050'}}>
                                        {currentUser.status==='pending'?t.statusPending : currentUser.status==='approved'?t.statusApproved : t.statusRejected}
                                    </div>
                                </div>
                                
                                {currentUser.status === 'approved' ? (
                                    <div>
                                        <label style={{fontSize:'12px', color:'#666'}}>{t.submitTask}</label>
                                        <input className="input-box" placeholder="https://v.tiktok.com/..." style={{marginTop:'8px'}} />
                                        <button style={styles.btnMain} onClick={()=>alert("任務提交成功，等待人工審核播放量")}>{t.submitBtn}</button>
                                    </div>
                                ) : currentUser.status === 'rejected' ? (
                                    <button style={styles.btnMain} onClick={()=>{setModalType("service"); setShowModal(true)}}>聯繫官方客服解封</button>
                                ) : null}
                            </div>
                            <button onClick={()=>setView("creator")} style={{background:'none', border:'1px solid #333', color:'#666', width:'100%', padding:'10px', borderRadius:'10px'}}>返回首頁</button>
                        </div>
                    ) : (
                        /* --- 4. 管理員後台 --- */
                        <div style={{padding:'20px 5%'}}>
                            <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}><h2>指揮部</h2><button onClick={()=>setView("creator")}>退出</button></div>
                            <div style={styles.card}>
                                <p>創客審核列表</p>
                                {pendingUsers.map(u => (
                                    <div key={u.id} style={{padding:'10px', borderBottom:'1px solid #222'}}>
                                        <div>{u.info}</div>
                                        <div style={{fontSize:'10px', color:'#00f2ea'}}>{u.tiktok}</div>
                                        <button style={styles.btnCyan} onClick={()=>{alert("已通過"); setView("creator"); setCurrentUser(prev=>({...prev, status:'approved'}))}}>准予通過</button>
                                        <button style={{...styles.btnCyan, background:'#ff0050', marginLeft:'10px'}} onClick={()=>{alert("已駁回"); setCurrentUser(prev=>({...prev, status:'rejected'}))}}>駁回</button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* --- 5. 彈窗系統 --- */}
                    {showModal && (
                        <div className="modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="modal-content" onClick={e => e.stopPropagation()}>
                                <h2 style={{color:'#00f2ea', fontSize:'20px', marginBottom:'15px'}}>{t.modals[modalType]?.title}</h2>
                                {modalType === 'service' ? (
                                    <img src={qrCodeUrl} style={{width:'150px', borderRadius:'10px', border:'2px solid #00f2ea'}} />
                                ) : (
                                    <form onSubmit={handleLogic}>
                                        <input required className="input-box" value={inputVal} onChange={e=>setInputVal(e.target.value)} placeholder="Email / 手機號" />
                                        <input required className="input-box" type="password" value={inputPass} onChange={e=>setInputPass(e.target.value)} placeholder="密碼" />
                                        <button className="input-box" style={{background:'#00f2ea', color:'#000', fontWeight:'bold', border:'none'}}>{status==='processing'?'...':t.modals[modalType]?.btn}</button>
                                        {modalType === 'login' && <div onClick={()=>setModalType("register")} style={{fontSize:'12px', color:'#666', cursor:'pointer', marginTop:'10px'}}>沒有賬號？立即註冊</div>}
                                    </form>
                                )}
                                <button onClick={()=>setShowModal(false)} style={{background:'none', border:'none', color:'#444', marginTop:'10px'}}>關閉</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
